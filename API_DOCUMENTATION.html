<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - RackPlane Documentation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">RackPlane</h1>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search documentation...">
                <div id="searchResults" class="search-results"></div>
            </div>
            <nav class="nav-menu" id="navMenu">
                <div class="nav-category">Getting Started</div>
<ul class="nav-items">
<li><a href="README.html" class="">RackPlane Documentation</a></li>
</ul>
<div class="nav-category">Setup & Installation</div>
<ul class="nav-items">
<li><a href="DEPLOYMENT.html" class="">Deployment Guide</a></li>
<li><a href="NETBOX_SETUP.html" class="">NetBox Integration Setup Guide</a></li>
<li><a href="LABEL_PRINTING.html" class="">Label Printing Guide</a></li>
<li><a href="QUICK_FIX.html" class="">ðŸš¨ QUICK FIX: Database "dcms" Does Not Exist</a></li>
</ul>
<div class="nav-category">User Guides</div>
<ul class="nav-items">
<li><a href="STOCK_MANAGEMENT_GUIDE.html" class="">Stock Management Guide</a></li>
<li><a href="TENANT_ONBOARDING.html" class="">Tenant Onboarding Documentation</a></li>
</ul>
<div class="nav-category">Backup & Recovery</div>
<ul class="nav-items">
<li><a href="BACKUP_GUIDE.html" class="">Database Backup & Restore Guide</a></li>
<li><a href="CROSS_SERVER_BACKUP.html" class="">Cross-Server Backup & Restore Guide</a></li>
<li><a href="EMERGENCY_RECOVERY.html" class="">ðŸš¨ EMERGENCY DATABASE RECOVERY GUIDE</a></li>
</ul>
<div class="nav-category">API Reference</div>
<ul class="nav-items">
<li><a href="API_DOCUMENTATION.html" class="active">API Documentation</a></li>
</ul>
            </nav>
        </aside>
        <main class="content">
            <article class="doc-content">
                <h1>API Documentation</h1>

<h2>Base URL</h2>

<pre><code>Development: http://localhost:8000
Production: https://api.dcms.example.com
</code></pre>

<h2>Authentication</h2>

<p>Currently, the API does not require authentication. For production deployments, implement JWT-based authentication:</p>

<pre><code class="language-bash"># Future implementation
POST /api/v1/auth/login
POST /api/v1/auth/refresh
GET /api/v1/auth/me
</code></pre>

<h2>API Endpoints</h2>

<h3>System Health</h3>

<h4>Check System Health</h4>
<pre><code class="language-http">GET /health
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "status": "operational",
  "version": "1.0.0",
  "system": "Datacenter Inventory Management System"
}
</code></pre>

<hr>

<h2>Assets Management</h2>

<h3>List Assets</h3>
<pre><code class="language-http">GET /api/v1/assets/
</code></pre>

<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>skip</code> (integer): Pagination offset (default: 0)</li>
<li><code>limit</code> (integer): Page size (default: 100, max: 1000)</li>
<li><code>asset_type</code> (string): Filter by asset type</li>
<li><code>status</code> (string): Filter by status</li>
<li><code>datacenter_id</code> (integer): Filter by datacenter</li>
<li><code>rack_id</code> (integer): Filter by rack</li>
<li><code>manufacturer</code> (string): Filter by manufacturer</li>
<li><code>search</code> (string): Search in asset_tag, serial, hostname, model</li>
</ul>

<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "total": 150,
  "skip": 0,
  "limit": 100,
  "assets": [
    {
      "id": 1,
      "asset_tag": "SRV-001",
      "serial_number": "SN123456789",
      "asset_type": "server",
      "manufacturer": "Dell",
      "model": "PowerEdge R750",
      "status": "deployed",
      "hostname": "prod-web-01",
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  ]
}
</code></pre>

<h3>Create Asset</h3>
<pre><code class="language-http">POST /api/v1/assets/
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "asset_tag": "SRV-001",
  "serial_number": "SN123456789",
  "asset_type": "server",
  "manufacturer": "Dell",
  "model": "PowerEdge R750",
  "sku": "R750-001",
  "status": "received",
  "height_u": 2,
  "power_consumption_watts": 750,
  "hostname": "prod-web-01",
  "description": "Production web server"
}
</code></pre>

<h3>Get Asset Details</h3>
<pre><code class="language-http">GET /api/v1/assets/{asset_id}
</code></pre>

<h3>Update Asset</h3>
<pre><code class="language-http">PUT /api/v1/assets/{asset_id}
</code></pre>

<h3>Delete Asset</h3>
<pre><code class="language-http">DELETE /api/v1/assets/{asset_id}
</code></pre>

<h3>Upload Asset Photo</h3>
<pre><code class="language-http">POST /api/v1/assets/{asset_id}/photos
</code></pre>

<p><strong>Form Data:</strong></p>
<ul>
<li><code>file</code>: Image file (multipart/form-data)</li>
</ul>

<h3>Deploy Asset</h3>
<pre><code class="language-http">POST /api/v1/assets/{asset_id}/deploy
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "rack_id": 5,
  "u_position_start": 12
}
</code></pre>

<h3>Decommission Asset</h3>
<pre><code class="language-http">POST /api/v1/assets/{asset_id}/decommission
</code></pre>

<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>reason</code> (string): Decommission reason</li>
</ul>

<h3>Get EOL Warnings</h3>
<pre><code class="language-http">GET /api/v1/assets/warnings/eol?days=90
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="language-json">[
  {
    "asset": { /* asset object */ },
    "eol_date": "2024-12-31T00:00:00Z",
    "days_remaining": 45
  }
]
</code></pre>

<hr>

<h2>Locations Management</h2>

<h3>List Datacenters</h3>
<pre><code class="language-http">GET /api/v1/locations/datacenters
</code></pre>

<h3>Create Datacenter</h3>
<pre><code class="language-http">POST /api/v1/locations/datacenters
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "name": "Primary Datacenter",
  "code": "DC01",
  "address": "123 Server St",
  "city": "San Francisco",
  "total_power_capacity_kw": 5000,
  "total_cooling_capacity_btu": 1000000
}
</code></pre>

<h3>List Racks</h3>
<pre><code class="language-http">GET /api/v1/locations/racks?datacenter_id=1
</code></pre>

<h3>Create Rack</h3>
<pre><code class="language-http">POST /api/v1/locations/racks
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "datacenter_id": 1,
  "room_id": 1,
  "name": "Rack A-05",
  "code": "R01-A-05",
  "height_u": 42,
  "power_capacity_watts": 20000,
  "row": "A",
  "position": "05"
}
</code></pre>

<h3>Get Rack Capacity</h3>
<pre><code class="language-http">GET /api/v1/locations/racks/{rack_id}/capacity
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "rack_id": 5,
  "rack_code": "R01-A-05",
  "total_u_space": 42,
  "used_u_space": 28,
  "available_u_space": 14,
  "u_space_utilization_percent": 66.67,
  "total_power_capacity_watts": 20000,
  "used_power_watts": 8500,
  "available_power_watts": 11500,
  "power_utilization_percent": 42.5,
  "space_warning": false,
  "power_warning": false
}
</code></pre>

<h3>Get Available U-Positions</h3>
<pre><code class="language-http">GET /api/v1/locations/racks/{rack_id}/available-positions?u_height=2
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="language-json">[1, 3, 5, 7, 12, 15, 18, 21, 25, 30]
</code></pre>

<h3>Find Optimal Rack</h3>
<pre><code class="language-http">GET /api/v1/locations/capacity/optimal-rack
</code></pre>

<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>datacenter_id</code> (required): Datacenter ID</li>
<li><code>u_height</code> (required): Device height in U</li>
<li><code>power_watts</code> (required): Power requirement</li>
<li><code>cooling_btu</code> (optional): Cooling requirement</li>
<li><code>prioritize</code> (optional): "power_efficiency" | "space" | "balanced"</li>
</ul>

<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "found": true,
  "recommended_rack": {
    "rack_id": 5,
    "rack_code": "R01-A-05",
    "suggested_u_position": 12,
    "available_positions": 7,
    "current_power_utilization": 45.2,
    "current_space_utilization": 52.3
  },
  "alternatives": [
    {
      "rack_id": 7,
      "rack_code": "R01-A-07",
      "score": 85.3
    }
  ]
}
</code></pre>

<hr>

<h2>Maintenance Management</h2>

<h3>List Maintenance Records</h3>
<pre><code class="language-http">GET /api/v1/maintenance/
</code></pre>

<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>asset_id</code> (integer): Filter by asset</li>
<li><code>status</code> (string): Filter by status</li>
<li><code>maintenance_type</code> (string): Filter by type</li>
</ul>

<h3>Create Maintenance Record</h3>
<pre><code class="language-http">POST /api/v1/maintenance/
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "asset_id": 1,
  "maintenance_type": "preventive",
  "priority": "medium",
  "title": "Quarterly server maintenance",
  "description": "Replace air filters and check PSU",
  "scheduled_date": "2024-12-15T14:00:00Z",
  "assigned_to": "John Doe"
}
</code></pre>

<h3>Start Maintenance</h3>
<pre><code class="language-http">POST /api/v1/maintenance/{maintenance_id}/start
</code></pre>

<h3>Complete Maintenance</h3>
<pre><code class="language-http">POST /api/v1/maintenance/{maintenance_id}/complete
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "work_performed": "Replaced air filters, tested PSUs",
  "issue_resolved": true
}
</code></pre>

<h3>Get Predictive Maintenance Predictions</h3>
<pre><code class="language-http">GET /api/v1/maintenance/predictions/?days_ahead=30&amp;min_confidence=0.7
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="language-json">[
  {
    "id": 1,
    "asset_id": 15,
    "prediction_date": "2024-11-16T00:00:00Z",
    "predicted_failure_date": "2024-12-20T00:00:00Z",
    "confidence_score": 0.87,
    "failure_type": "psu",
    "failure_severity": "high",
    "recommended_action": "Schedule PSU replacement for SRV-015"
  }
]
</code></pre>

<h3>Generate Predictions</h3>
<pre><code class="language-http">POST /api/v1/maintenance/predictions/generate
</code></pre>

<hr>

<h2>Workflows</h2>

<h3>List Workflow Templates</h3>
<pre><code class="language-http">GET /api/v1/workflows/templates
</code></pre>

<h3>Create Workflow Execution</h3>
<pre><code class="language-http">POST /api/v1/workflows/executions
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "workflow_id": 1,
  "execution_name": "Deploy new server",
  "target_asset_id": 15,
  "assigned_to": "Jane Smith"
}
</code></pre>

<h3>Get Workflow Execution Details</h3>
<pre><code class="language-http">GET /api/v1/workflows/executions/{execution_id}
</code></pre>

<h3>Create Standard Deployment Workflow</h3>
<pre><code class="language-http">POST /api/v1/workflows/standard/deployment
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "asset_id": 15,
  "rack_id": 5,
  "u_position": 12
}
</code></pre>

<hr>

<h2>Reports</h2>

<h3>Asset Utilization Report</h3>
<pre><code class="language-http">GET /api/v1/reports/asset-utilization?datacenter_id=1
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  "total_assets": 150,
  "active": 120,
  "deployed": 110,
  "maintenance": 5,
  "failed": 2,
  "utilization_rate": 88.67
}
</code></pre>

<h3>Capacity Summary</h3>
<pre><code class="language-http">GET /api/v1/reports/capacity-summary?datacenter_id=1
</code></pre>

<h3>Inventory Value Report</h3>
<pre><code class="language-http">GET /api/v1/reports/inventory-value
</code></pre>

<h3>PUE Report</h3>
<pre><code class="language-http">GET /api/v1/reports/pue?datacenter_id=1&amp;days=30
</code></pre>

<h3>Dashboard Summary</h3>
<pre><code class="language-http">GET /api/v1/reports/dashboard/summary
</code></pre>

<h3>Export Inventory</h3>
<pre><code class="language-http">GET /api/v1/reports/export/inventory?format=xlsx&amp;datacenter_id=1
</code></pre>

<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>format</code>: "xlsx" | "csv" | "pdf"</li>
<li><code>datacenter_id</code> (optional): Filter by datacenter</li>
</ul>

<hr>

<h2>Environmental Monitoring</h2>

<h3>List Sensors</h3>
<pre><code class="language-http">GET /api/v1/environmental/sensors?datacenter_id=1
</code></pre>

<h3>Create Sensor</h3>
<pre><code class="language-http">POST /api/v1/environmental/sensors
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "datacenter_id": 1,
  "sensor_id": "TEMP-001",
  "sensor_name": "Rack A-05 Inlet Temperature",
  "sensor_type": "temperature",
  "location_description": "Rack A-05 front inlet",
  "warning_threshold_min": 18.0,
  "warning_threshold_max": 27.0,
  "unit_of_measure": "C"
}
</code></pre>

<h3>Record Reading</h3>
<pre><code class="language-http">POST /api/v1/environmental/readings
</code></pre>

<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
  "sensor_id": 1,
  "value": 22.5,
  "unit": "C"
}
</code></pre>

<h3>Get Latest Readings</h3>
<pre><code class="language-http">GET /api/v1/environmental/readings/latest?datacenter_id=1
</code></pre>

<h3>Get Temperature Trends</h3>
<pre><code class="language-http">GET /api/v1/environmental/analytics/temperature-trends?datacenter_id=1&amp;days=7
</code></pre>

<hr>

<h2>NetBox Integration</h2>

<h3>Test NetBox Connection</h3>
<pre><code class="language-http">POST /api/v1/netbox/test-connection
</code></pre>

<h3>Sync from NetBox</h3>
<pre><code class="language-http">POST /api/v1/netbox/sync/pull?full_sync=true
</code></pre>

<h3>Sync to NetBox</h3>
<pre><code class="language-http">POST /api/v1/netbox/sync/push?asset_id=1
</code></pre>

<h3>Bidirectional Sync</h3>
<pre><code class="language-http">POST /api/v1/netbox/sync/bidirectional
</code></pre>

<hr>

<h2>Error Responses</h2>

<h3>Standard Error Format</h3>
<pre><code class="language-json">{
  "detail": "Error message description"
}
</code></pre>

<h3>HTTP Status Codes</h3>
<ul>
<li><code>200 OK</code>: Successful request</li>
<li><code>201 Created</code>: Resource created successfully</li>
<li><code>204 No Content</code>: Successful deletion</li>
<li><code>400 Bad Request</code>: Invalid input</li>
<li><code>404 Not Found</code>: Resource not found</li>
<li><code>500 Internal Server Error</code>: Server error</li>
</ul>

<hr>

<h2>Rate Limiting</h2>

<p>(To be implemented in production)</p>

<pre><code>Rate Limit: 1000 requests per hour
Headers:
  X-RateLimit-Limit: 1000
  X-RateLimit-Remaining: 999
  X-RateLimit-Reset: 1699564800
</code></pre>

<hr>

<p>For interactive API documentation, visit:</p>
<ul>
<li>Swagger UI: http://localhost:8000/api/docs</li>
<li>ReDoc: http://localhost:8000/api/redoc</li>
</ul>

            </article>
        </main>
    </div>
    <script src="app.js"></script>
</body>
</html>